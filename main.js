(()=>{"use strict";document.querySelector(".cards"),document.querySelector(".card__delete-btn");var t={cohortId:"cohort-46",token:"a7c510e0-05ad-459e-a0d1-31a92d4ef951"},e={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__button",errorElementSelector:".form__item-error",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__item_type_error",errorClass:"form__item-error_active"};function n(t){var e=t.split("-");return e[0]+"".concat(e[1][0].toUpperCase()).concat(e[1].slice(1))}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=i((function t(e,n,o,i,c,u,l,s){var f=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"generateCard",(function(){f._cardImage.src=f._link,f._cardImage.alt=f._name,f._cardDescription.textContent=f._name,f._cardLikeCount.textContent=f._likes.length,f._ownerId===f._userId&&f._cardDeleteButton.classList.remove("card__delete-btn_disabled");var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw a}}}}(f._likes);try{for(e.s();!(t=e.n()).done;)t.value._id===f._userId&&f._cardLikeButton.classList.add("like-group__icon_active")}catch(t){e.e(t)}finally{e.f()}return f._setEventListeners(),f._cardElement})),a(this,"_handleImageClick",(function(){f._handleCardClick({name:f._name,link:f._link})})),a(this,"_renderLike",(function(t){f._cardLikeCount.textContent=t.likes.length,f._cardLikeButton.classList.toggle("like-group__icon_active")})),a(this,"_handleLikeCard",(function(){f._isLiked()?f._handleDeleteLike(f._id).then((function(t){return f._renderLike(t)})):f._handlePutLike(f._id).then((function(t){return f._renderLike(t)}))})),a(this,"_isLiked",(function(){return!!f._cardLikeButton.classList.contains("like-group__icon_active")})),a(this,"_handleDeleteBtnClick",(function(){f._handleConfirmPopupOpen(f._id,f.remove)})),a(this,"remove",(function(){f._cardElement.remove()})),a(this,"_setEventListeners",(function(){f._cardImage.addEventListener("click",f._handleImageClick),f._cardLikeButton.addEventListener("click",f._handleLikeCard),f._cardDeleteButton.addEventListener("click",f._handleDeleteBtnClick)})),this._name=e.name,this._link=e.link,this._id=e._id,this._ownerId=e.owner._id,this._userId=n,this._likes=e.likes,this._templateSelector=o,this._handlePutLike=u,this._handleDeleteLike=l,this._likesCount=s,this._handleCardClick=i,this._handleConfirmPopupOpen=c,this._cardElement=document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardDescription=this._cardElement.querySelector(".card__description"),this._cardLikeButton=this._cardElement.querySelector(".like-group__icon"),this._cardLikeCount=this._cardElement.querySelector(".like-group__count"),this._cardDeleteButton=this._cardElement.querySelector(".card__delete-btn")}));function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=l((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"_showInputError",(function(t,e,n){var o=t.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),o.textContent=n,o.classList.add(r._errorClass)})),s(this,"_hideInputError",(function(t,e){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),n.classList.remove(r._errorClass),n.textContent=""})),s(this,"_hasInvalidInput",(function(t){return Array.from(t).some((function(t){return!t.validity.valid}))})),s(this,"_toggleButtonState",(function(){r._hasInvalidInput(r._inputList)?(r._submitButtonElement.classList.add(r._inactiveButtonClass),r._submitButtonElement.setAttribute("disabled",!0)):(r._submitButtonElement.classList.remove(r._inactiveButtonClass),r._submitButtonElement.removeAttribute("disabled"))})),s(this,"resetValidation",(function(){r._toggleButtonState(),r._inputList.forEach((function(t){return r._hideInputError(r._formElement,t)}))})),s(this,"_checkInputValidity",(function(t,e){e.validity.valid?r._hideInputError(t,e):r._showInputError(t,e,e.validationMessage)})),s(this,"_setEventListeners",(function(){r._inputList.forEach((function(t){t.addEventListener("input",(function(){r._checkInputValidity(r._formElement,t),r._toggleButtonState()}))}))})),s(this,"enableValidation",(function(){r._formElement.addEventListener("submit",(function(t){return t.preventDefault()})),r._setEventListeners()})),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._errorElementSelector=e.errorElementSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formSelector=n,this._formElement=document.querySelector(this._formSelector),this._inputList=this._formElement.querySelectorAll(this._inputSelector),this._submitButtonElement=this._formElement.querySelector(this._submitButtonSelector)}));function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=d((function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"prependItem",(function(t){r._container.prepend(t)})),h(this,"addItem",(function(t){r._container.append(t)})),h(this,"renderItems",(function(t){t.forEach((function(t){return r._renderer(t)}))})),this._renderer=e,this._container=document.querySelector(n)}));function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(e){var n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(t){"Escape"===t.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popupSelector=e,this._popupElement=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("mousedown",(function(e){e.target.classList.contains("popup_opened")&&t.close(),e.target.classList.contains("popup__close-btn")&&t.close()}))}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=E(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function E(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function w(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(o){var n=C(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return w(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._popupImage=e._popupElement.querySelector(".popup__image"),e._popupCaption=e._popupElement.querySelector(".popup__image-description"),e}return e=a,(n=[{key:"open",value:function(t){g(C(a.prototype),"open",this).call(this),this._popupImage.src=t.link,this._popupImage.alt=t.name,this._popupCaption.textContent=t.name}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(m);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=I(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function I(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function B(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(c,t);var e,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(o);if(i){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return B(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=a.call(this,t))._formElement=n._popupElement.querySelector(".form"),n.inputList=n._formElement.querySelectorAll(".form__item"),n._formButton=n._formElement.querySelector(".form__button"),n._buttonText=n._formButton.textContent,n._handleFormSubmit=e,n}return e=c,(r=[{key:"_renderBtnText",value:function(t){return t.slice(0,5)+(t.length>7?"няю...":"ю...")}},{key:"renderLoading",value:function(t){this._formButton.textContent=t?this._renderBtnText(this._buttonText):this._buttonText}},{key:"_getInputValues",value:function(){var t={};return this.inputList.forEach((function(e){t[n(e.name)]=e.value})),t}},{key:"close",value:function(){j(R(c.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setEventListeners",value:function(){var t=this;j(R(c.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){return t._handleFormSubmit(e,t._getInputValues())}))}}])&&O(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(m);function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._openUserPopup=o,this._openAvatarPopup=r,this._openCardPopup=n,this._profileElement=document.querySelector(e),this._nameElement=this._profileElement.querySelector(".profile__name"),this._activityElement=this._profileElement.querySelector(".profile__activity"),this._avatarElement=this._profileElement.querySelector(".profile__avatar"),this._addCardBtn=this._profileElement.querySelector(".profile__add-btn"),this._editUserAvatarBtn=this._profileElement.querySelector(".profile__overlay"),this._editUserInfoBtn=this._profileElement.querySelector(".profile__edit-btn")}var e,n;return e=t,n=[{key:"getUserInfo",value:function(){var t={};return t.userName=this._nameElement.textContent,t.userActivity=this._activityElement.textContent,t.avatar=this._avatarElement.src,t}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about;this._nameElement.textContent=e,this._activityElement.textContent=n}},{key:"setUserAvatar",value:function(t){this._avatarElement.src=t}},{key:"setEventListeners",value:function(){this._addCardBtn.addEventListener("click",this._openCardPopup),this._editUserAvatarBtn.addEventListener("click",this._openAvatarPopup),this._editUserInfoBtn.addEventListener("click",this._openUserPopup)}}],n&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=V(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},U.apply(this,arguments)}function V(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function N(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(r);if(o){var n=F(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return N(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._formElement=n._popupElement.querySelector(".form"),n._formButton=n._formElement.querySelector(".form__button"),n._text=n._formButton.textContent,n._handleFormSubmit=e,n}return e=a,(n=[{key:"renderLoading",value:function(t){this._formButton.textContent=t?"Удаляю...":this._text}},{key:"setEventListeners",value:function(){var t=this;U(F(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(e){return t._handleFormSubmit(e,t._id)}))}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(m);function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var H=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cohortId=e.cohortId,this.token=e.token,this._url="https://mesto.nomoreparties.co/v1"}var e,n;return e=t,(n=[{key:"_getResponseData",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._url,"/").concat(this.cohortId,"/cards"),{headers:{authorization:this.token}}).then((function(e){return t._getResponseData(e)}))}},{key:"addCard",value:function(t){var e=this;return fetch("".concat(this._url,"/").concat(this.cohortId,"/cards"),{method:"POST",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._getResponseData(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._url,"/").concat(this.cohortId,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this.token,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"likeCard",value:function(t){var e=this;return fetch("".concat(this._url,"/").concat(this.cohortId,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this.token,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"dislikeCard",value:function(t){var e=this;return fetch("".concat(this._url,"/").concat(this.cohortId,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this.token,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var t=this;return fetch("https://nomoreparties.co/v1/".concat(this.cohortId,"/users/me"),{headers:{authorization:this.token}}).then((function(e){return t._getResponseData(e)}))}},{key:"editUserInfo",value:function(t){var e=this,n=t.name,r=t.about;return fetch("".concat(this._url,"/").concat(this.cohortId,"/users/me"),{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({name:n,about:r})}).then((function(t){return e._getResponseData(t)}))}},{key:"editUserAvatar",value:function(t){var e=this,n=t.avatar;return fetch("".concat(this._url,"/").concat(this.cohortId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({avatar:n})}).then((function(t){return e._getResponseData(t)}))}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var G=new H(t),K=new f(e,".form_type_user");K.enableValidation();var Q=new f(e,".form_type_card");Q.enableValidation();var W=new f(e,".form_type_avatar");W.enableValidation();var X=new S(".popup_type_image");X.setEventListeners();var Y=new T(".popup_type_user",(function(t,e){var n=e.userName,r=e.userActivity;t.preventDefault(),Y.renderLoading(!0),G.editUserInfo({name:n,about:r}).then(nt.setUserInfo({name:n,about:r})).then(Y.close()).catch((function(t){return console.log(t)})).finally((function(){return Y.renderLoading(!1)}))}));Y.setEventListeners();var Z=new T(".popup_type_avatar",(function(t,e){var n=e.avatarLink;t.preventDefault(),Z.renderLoading(!0),G.editUserAvatar({avatar:n}).then((function(t){return nt.setUserAvatar(t.avatar)})).then(Z.close()).catch((function(t){return console.log(t)})).finally((function(){return Z.renderLoading(!1)}))}));Z.setEventListeners();var tt=new J(".popup_type_confirm",(function(t,e){t.preventDefault(),tt.renderLoading(!0),G.deleteCard(e).then(tt.remove()).then(tt.close()).catch((function(t){return console.log(t)})).finally((function(){return tt.renderLoading(!1)}))}));tt.setEventListeners();var et=new T(".popup_type_card",(function(t,e){var n=e.cardName,r=e.cardLink;t.preventDefault(),et.renderLoading(!0);var o={name:n,link:r};G.addCard(o).then((function(t){return ot.prependItem(rt(t))})).then(et.close()).catch((function(t){return console.log(t)})).finally((function(){return et.renderLoading(!1)}))}));et.setEventListeners();var nt=new q(".profile",(function(){Q.resetValidation(),et.open()}),(function(){W.resetValidation(),Z.open()}),(function(){var t=nt.getUserInfo();Y.inputList.forEach((function(e){e.value=t[n(e.name)]})),K.resetValidation(),Y.open()}));function rt(e){return new c(e,t.userId,"#card-template",it,at,ct,ut).generateCard()}nt.setEventListeners();var ot=new _((function(t){var e=rt(t);ot.addItem(e)}),".cards");Promise.all([G.getUserInfo(),G.getInitialCards()]).then((function(e){var n,r,o=(r=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(n,r)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];nt.setUserInfo(i),nt.setUserAvatar(i.avatar),t.userId=i._id,ot.renderItems(a)})).catch((function(t){return console.log(t)}));var it=function(t){var e=t.name,n=t.link;X.open({name:e,link:n})};function at(t,e){tt._id=t,tt.remove=e,tt.open()}function ct(t){return G.likeCard(t)}function ut(t){return G.dislikeCard(t)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBUzRCQSxTQUFTQyxjQUFjLFVBS3RCRCxTQUFTQyxjQUFjLHFCQWQ3QyxJQWdCTUMsRUFBVSxDQUN0QkMsU0FBVSxZQUNWQyxNQUFPLHdDQUdLQyxFQUFTLENBQ3BCQyxhQUFjLFFBQ2RDLGNBQWUsY0FDaEJDLHFCQUFzQixnQkFDdEJDLHFCQUFzQixvQkFDckJDLG9CQUFxQix3QkFDckJDLGdCQUFpQix3QkFDakJDLFdBQVksMkJDNUJQLFNBQVNDLEVBQVlDLEdBQzNCLElBQU1DLEVBQU1ELEVBQU9FLE1BQU0sS0FDekIsT0FBT0QsRUFBSSxHQUFKLFVBQVlBLEVBQUksR0FBRyxHQUFHRSxlQUF0QixPQUFzQ0YsRUFBSSxHQUFHRyxNQUFNLEksd2ZDRnRDQyxFQUFBQSxHQUNwQixXQUNDQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVELFksNEZBQUEsZ0NBcUJlLFdBQ2QsRUFBS0MsV0FBV0MsSUFBTSxFQUFLQyxNQUMzQixFQUFLRixXQUFXRyxJQUFNLEVBQUtDLE1BQzNCLEVBQUtDLGlCQUFpQkMsWUFBYyxFQUFLRixNQUN6QyxFQUFLRyxlQUFlRCxZQUFjLEVBQUtFLE9BQU9DLE9BQzFDLEVBQUtDLFdBQWEsRUFBS0MsU0FDMUIsRUFBS0Msa0JBQWtCQyxVQUFVQyxPQUFPLDZCQU5yQixRLDI1QkFBQSxDQVNILEVBQUtOLFFBVEYsSUFTcEIsSUFBSyxFQUFMLHFCQUE4QixRQUNwQk8sTUFBUSxFQUFLSixTQUNyQixFQUFLSyxnQkFBZ0JILFVBQVVJLElBQUksMkJBWGpCLDhCQWlCcEIsT0FGQSxFQUFLQyxxQkFFRSxFQUFLQyxnQkF0Q2IsNEJBeUNvQixXQUNuQixFQUFLQyxpQkFBaUIsQ0FBRUMsS0FBTSxFQUFLakIsTUFBT2tCLEtBQU0sRUFBS3BCLFdBMUN0RCxzQkE2Q2MsU0FBQ3FCLEdBQ2QsRUFBS2hCLGVBQWVELFlBQWNpQixFQUFLQyxNQUFNZixPQUM3QyxFQUFLTyxnQkFBZ0JILFVBQVVZLE9BQU8sOEJBL0N2QywwQkFrRGtCLFdBQ1osRUFBS0MsV0FLVCxFQUFLQyxrQkFBa0IsRUFBS1osS0FDMUJhLE1BQUssU0FBQUwsR0FBSSxPQUFJLEVBQUtNLFlBQVlOLE1BTGhDLEVBQUtPLGVBQWUsRUFBS2YsS0FDdkJhLE1BQUssU0FBQUwsR0FBSSxPQUFJLEVBQUtNLFlBQVlOLFNBckRsQyxtQkE2RFcsV0FDVixRQUFPLEVBQUtQLGdCQUFnQkgsVUFBVWtCLFNBQVMsOEJBOURoRCxnQ0FpRXdCLFdBQ3ZCLEVBQUtDLHdCQUF3QixFQUFLakIsSUFBSyxFQUFLRCxXQWxFN0MsaUJBcUVTLFdBQ1IsRUFBS0ssYUFBYUwsWUF0RW5CLDZCQXlFcUIsV0FDbEIsRUFBS2QsV0FBV2lDLGlCQUFpQixRQUFTLEVBQUtDLG1CQUNqRCxFQUFLbEIsZ0JBQWdCaUIsaUJBQWlCLFFBQVMsRUFBS0UsaUJBQ3BELEVBQUt2QixrQkFBa0JxQixpQkFBaUIsUUFBUyxFQUFLRywwQkEzRXREQyxLQUFLakMsTUFBUVosRUFBSzZCLEtBQ2xCZ0IsS0FBS25DLE1BQVFWLEVBQUs4QixLQUNsQmUsS0FBS3RCLElBQU12QixFQUFLdUIsSUFDaEJzQixLQUFLM0IsU0FBV2xCLEVBQUs4QyxNQUFNdkIsSUFDM0JzQixLQUFLMUIsUUFBVWxCLEVBQ2Y0QyxLQUFLN0IsT0FBU2hCLEVBQUtnQyxNQUNuQmEsS0FBS0Usa0JBQW9CN0MsRUFDekIyQyxLQUFLUCxlQUFpQmpDLEVBQ3RCd0MsS0FBS1Ysa0JBQW9CN0IsRUFDekJ1QyxLQUFLRyxZQUFjekMsRUFDbkJzQyxLQUFLakIsaUJBQW1CekIsRUFDeEIwQyxLQUFLTCx3QkFBMEJwQyxFQUMvQnlDLEtBQUtsQixhQUFlL0MsU0FBU0MsY0FBY2dFLEtBQUtFLG1CQUFtQkUsUUFBUXBFLGNBQWMsU0FBU3FFLFdBQVUsR0FDNUdMLEtBQUtyQyxXQUFhcUMsS0FBS2xCLGFBQWE5QyxjQUFjLGdCQUNsRGdFLEtBQUtoQyxpQkFBbUJnQyxLQUFLbEIsYUFBYTlDLGNBQWMsc0JBQ3hEZ0UsS0FBS3JCLGdCQUFrQnFCLEtBQUtsQixhQUFhOUMsY0FBYyxxQkFDdkRnRSxLQUFLOUIsZUFBaUI4QixLQUFLbEIsYUFBYTlDLGNBQWMsc0JBQ3REZ0UsS0FBS3pCLGtCQUFvQnlCLEtBQUtsQixhQUFhOUMsY0FBYyx3Qiw4WUM3QnRDc0UsRUFBQUEsR0FDbkIsV0FBWWxFLEVBQVFDLEdBQWMsWSw0RkFBQSxtQ0FhaEIsU0FBQ2tFLEVBQWFDLEVBQWNDLEdBQzVDLElBQU1DLEVBQWVILEVBQVl2RSxjQUFaLFdBQThCd0UsRUFBYUcsR0FBM0MsV0FDckJILEVBQWFoQyxVQUFVSSxJQUFJLEVBQUtnQyxrQkFDaENGLEVBQWF6QyxZQUFjd0MsRUFDM0JDLEVBQWFsQyxVQUFVSSxJQUFJLEVBQUtpQyxnQkFqQkEsMEJBb0JoQixTQUFDTixFQUFhQyxHQUM5QixJQUFNRSxFQUFlSCxFQUFZdkUsY0FBWixXQUE4QndFLEVBQWFHLEdBQTNDLFdBQ3JCSCxFQUFhaEMsVUFBVUMsT0FBTyxFQUFLbUMsa0JBQ25DRixFQUFhbEMsVUFBVUMsT0FBTyxFQUFLb0MsYUFDbkNILEVBQWF6QyxZQUFjLE1BeEJLLDJCQTJCZixTQUFDNkMsR0FDbEIsT0FBT0MsTUFBTUMsS0FBS0YsR0FBV0csTUFBSyxTQUFBVCxHQUNoQyxPQUFRQSxFQUFhVSxTQUFTQyxZQTdCQSw2QkFpQ2IsV0FDZixFQUFLQyxpQkFBaUIsRUFBS0MsYUFDN0IsRUFBS0MscUJBQXFCOUMsVUFBVUksSUFBSSxFQUFLMkMsc0JBQzdDLEVBQUtELHFCQUFxQkUsYUFBYSxZQUFZLEtBR25ELEVBQUtGLHFCQUFxQjlDLFVBQVVDLE9BQU8sRUFBSzhDLHNCQUNoRCxFQUFLRCxxQkFBcUJHLGdCQUFnQixnQkF4Q1osMEJBNENoQixXQUNoQixFQUFLQyxxQkFDTCxFQUFLTCxXQUFXTSxTQUFRLFNBQUFDLEdBQUssT0FBSSxFQUFLQyxnQkFBZ0IsRUFBS0MsYUFBY0YsU0E5Q3pDLDhCQWlEWixTQUFDckIsRUFBYUMsR0FDN0JBLEVBQWFVLFNBQVNDLE1BR3pCLEVBQUtVLGdCQUFnQnRCLEVBQWFDLEdBRmxDLEVBQUt1QixnQkFBZ0J4QixFQUFhQyxFQUFjQSxFQUFhd0Isc0JBbkQvQiw2QkF5RGIsV0FDbkIsRUFBS1gsV0FBV00sU0FBUSxTQUFDbkIsR0FDdkJBLEVBQWFaLGlCQUFpQixTQUFTLFdBQ3JDLEVBQUtxQyxvQkFBb0IsRUFBS0gsYUFBY3RCLEdBQzVDLEVBQUtrQiw4QkE3RHVCLDJCQWtFZixXQUNqQixFQUFLSSxhQUFhbEMsaUJBQWlCLFVBQVUsU0FBQ3NDLEdBQUQsT0FBU0EsRUFBSUMsb0JBQzFELEVBQUt0RCx3QkFuRUxtQixLQUFLb0MsZUFBaUJoRyxFQUFPRSxjQUM3QjBELEtBQUtxQyxzQkFBd0JqRyxFQUFPRyxxQkFDcEN5RCxLQUFLc0Msc0JBQXdCbEcsRUFBT0kscUJBQ3BDd0QsS0FBS3VCLHFCQUF1Qm5GLEVBQU9LLG9CQUNuQ3VELEtBQUtZLGlCQUFtQnhFLEVBQU9NLGdCQUMvQnNELEtBQUthLFlBQWN6RSxFQUFPTyxXQUMxQnFELEtBQUt1QyxjQUFnQmxHLEVBQ3JCMkQsS0FBSzhCLGFBQWUvRixTQUFTQyxjQUFjZ0UsS0FBS3VDLGVBQ2hEdkMsS0FBS3FCLFdBQWFyQixLQUFLOEIsYUFBYVUsaUJBQWlCeEMsS0FBS29DLGdCQUMxRHBDLEtBQUtzQixxQkFBdUJ0QixLQUFLOEIsYUFBYTlGLGNBQWNnRSxLQUFLcUMsMEIsOFlDWGhESSxFQUFBQSxHQUNwQixXQUFZQyxFQUFVQyxHQUFtQixZLDRGQUFBLCtCQUszQixTQUFDQyxHQUNkLEVBQUtDLFdBQVdDLFFBQVFGLE1BTmdCLGtCQVMvQixTQUFDQSxHQUNWLEVBQUtDLFdBQVdFLE9BQU9ILE1BVmlCLHNCQWEzQixTQUFDSSxHQUNkQSxFQUFNckIsU0FBUSxTQUFBc0IsR0FBSSxPQUFJLEVBQUtDLFVBQVVELFNBYnJDakQsS0FBS2tELFVBQVlSLEVBQ2pCMUMsS0FBSzZDLFdBQWE5RyxTQUFTQyxjQUFjMkcsTSwwS0NIdEJRLEVBQUFBLFdBQ3BCLFdBQVlDLEdBQWUsSSxJQUFBLFEsNEZBQUEsUyxFQWVULFNBQUNsQixHQUNGLFdBQVpBLEVBQUltQixLQUNQLEVBQUtDLFUsRUFqQm9CLDBCLHNCQUFBLEssdURBQUEsSyxLQUMxQnRELEtBQUt1RCxlQUFpQkgsRUFDdEJwRCxLQUFLd0QsY0FBZ0J6SCxTQUFTQyxjQUFjb0gsRyx5Q0FHN0MsV0FDQ3BELEtBQUt3RCxjQUFjaEYsVUFBVUksSUFBSSxnQkFDakM3QyxTQUFTNkQsaUJBQWlCLFVBQVdJLEtBQUt5RCxtQixtQkFHM0MsV0FDQ3pELEtBQUt3RCxjQUFjaEYsVUFBVUMsT0FBTyxnQkFDcEMxQyxTQUFTMkgsb0JBQW9CLFVBQVcxRCxLQUFLeUQsbUIsK0JBUzlDLFdBQW9CLFdBQ25CekQsS0FBS3dELGNBQWM1RCxpQkFBaUIsYUFBYSxTQUFDc0MsR0FDN0NBLEVBQUl5QixPQUFPbkYsVUFBVWtCLFNBQVMsaUJBQ2pDLEVBQUs0RCxRQUVGcEIsRUFBSXlCLE9BQU9uRixVQUFVa0IsU0FBUyxxQkFDakMsRUFBSzRELGdCLHNFQTVCWUgsRyx5d0NDRUFTLEVBQUFBLFNBQUFBLEksNnJCQUNwQixXQUFZUixHQUFlLGEsNEZBQUEsVUFDMUIsY0FBTUEsSUFDRFMsWUFBYyxFQUFLTCxjQUFjeEgsY0FBYyxpQkFDcEQsRUFBSzhILGNBQWdCLEVBQUtOLGNBQWN4SCxjQUFjLDZCQUg1QixFLGlDQU0zQixTQUFLK0gsR0FDSix5Q0FDQS9ELEtBQUs2RCxZQUFZakcsSUFBTW1HLEVBQU05RSxLQUM3QmUsS0FBSzZELFlBQVkvRixJQUFNaUcsRUFBTS9FLEtBQzdCZ0IsS0FBSzhELGNBQWM3RixZQUFjOEYsRUFBTS9FLFUsc0VBWHBCNEUsQ0FBdUJULEcseXdDQ0N2QmEsRUFBQUEsU0FBQUEsSSw2ckJBQ3BCLFdBQVlaLEVBQWVhLEdBQWtCLGEsNEZBQUEsVUFDNUMsY0FBTWIsSUFDRHRCLGFBQWUsRUFBSzBCLGNBQWN4SCxjQUFjLFNBQ3JELEVBQUs4RSxVQUFZLEVBQUtnQixhQUFhVSxpQkFBaUIsZUFDcEQsRUFBSzBCLFlBQWMsRUFBS3BDLGFBQWE5RixjQUFjLGlCQUNuRCxFQUFLbUksWUFBYyxFQUFLRCxZQUFZakcsWUFDcEMsRUFBS21HLGtCQUFvQkgsRUFObUIsRSwyQ0FTN0MsU0FBZUksR0FDZCxPQUFPQSxFQUFLcEgsTUFBTSxFQUFHLElBQU1vSCxFQUFLakcsT0FBUyxFQUFJLFNBQVcsVSwyQkFHekQsU0FBY2tHLEdBRVp0RSxLQUFLa0UsWUFBWWpHLFlBRGRxRyxFQUM0QnRFLEtBQUt1RSxlQUFldkUsS0FBS21FLGFBR3pCbkUsS0FBS21FLGMsNkJBSXRDLFdBQ0MsSUFBTUssRUFBYyxHQU1wQixPQUpBeEUsS0FBS2MsVUFBVWEsU0FBUSxTQUFBQyxHQUN0QjRDLEVBQVk1SCxFQUFZZ0YsRUFBTTVDLE9BQVM0QyxFQUFNNkMsU0FHdkNELEksbUJBR1IsV0FDQywwQ0FDQXhFLEtBQUs4QixhQUFhNEMsVSwrQkFHbkIsV0FBb0IsV0FDbkIsc0RBQ0ExRSxLQUFLOEIsYUFBYWxDLGlCQUFpQixVQUFVLFNBQUNzQyxHQUFELE9BQVMsRUFBS2tDLGtCQUFrQmxDLEVBQUssRUFBS3lDLDJCLHNFQXhDcEVYLENBQXNCYixHLDBLQ0h0QnlCLEVBQUFBLFdBQ3BCLFdBQVlDLEVBQWlCQyxFQUFlQyxFQUFpQkMsSSw0RkFBZSxTQUMzRWhGLEtBQUtpRixlQUFpQkQsRUFDdEJoRixLQUFLa0YsaUJBQW1CSCxFQUN4Qi9FLEtBQUttRixlQUFpQkwsRUFDdEI5RSxLQUFLb0YsZ0JBQWtCckosU0FBU0MsY0FBYzZJLEdBQzlDN0UsS0FBS3FGLGFBQWVyRixLQUFLb0YsZ0JBQWdCcEosY0FBYyxrQkFDdkRnRSxLQUFLc0YsaUJBQW1CdEYsS0FBS29GLGdCQUFnQnBKLGNBQWMsc0JBQzNEZ0UsS0FBS3VGLGVBQWlCdkYsS0FBS29GLGdCQUFnQnBKLGNBQWMsb0JBQ3pEZ0UsS0FBS3dGLFlBQWN4RixLQUFLb0YsZ0JBQWdCcEosY0FBYyxxQkFDdERnRSxLQUFLeUYsbUJBQXFCekYsS0FBS29GLGdCQUFnQnBKLGNBQWMscUJBQzdEZ0UsS0FBSzBGLGlCQUFtQjFGLEtBQUtvRixnQkFBZ0JwSixjQUFjLHNCLCtDQUc1RCxXQUNDLElBQU0ySixFQUFXLEdBSWpCLE9BSEFBLEVBQVNDLFNBQVc1RixLQUFLcUYsYUFBYXBILFlBQ3RDMEgsRUFBU0UsYUFBZTdGLEtBQUtzRixpQkFBaUJySCxZQUM5QzBILEVBQVNHLE9BQVM5RixLQUFLdUYsZUFBZTNILElBQy9CK0gsSSx5QkFHUixZQUE2QixJQUFmM0csRUFBZSxFQUFmQSxLQUFNK0csRUFBUyxFQUFUQSxNQUNuQi9GLEtBQUtxRixhQUFhcEgsWUFBY2UsRUFDaENnQixLQUFLc0YsaUJBQWlCckgsWUFBYzhILEksMkJBR3JDLFNBQWNELEdBQ2I5RixLQUFLdUYsZUFBZTNILElBQU1rSSxJLCtCQUczQixXQUNDOUYsS0FBS3dGLFlBQVk1RixpQkFBaUIsUUFBU0ksS0FBS21GLGdCQUNoRG5GLEtBQUt5RixtQkFBbUI3RixpQkFBaUIsUUFBU0ksS0FBS2tGLGtCQUN2RGxGLEtBQUswRixpQkFBaUI5RixpQkFBaUIsUUFBU0ksS0FBS2lGLG1CLHlFQWxDbENMLEcseXdDQ0VBb0IsRUFBQUEsU0FBQUEsSSw2ckJBQ3BCLFdBQVk1QyxFQUFlYSxHQUFrQixhLDRGQUFBLFVBQzVDLGNBQU1iLElBQ0R0QixhQUFlLEVBQUswQixjQUFjeEgsY0FBYyxTQUNyRCxFQUFLa0ksWUFBYyxFQUFLcEMsYUFBYTlGLGNBQWMsaUJBQ25ELEVBQUtpSyxNQUFRLEVBQUsvQixZQUFZakcsWUFDOUIsRUFBS21HLGtCQUFvQkgsRUFMbUIsRSwwQ0FRN0MsU0FBY0ssR0FDRHRFLEtBQUtrRSxZQUFZakcsWUFBN0JxRyxFQUEyQyxZQUE2Q3RFLEtBQUtpRyxRLCtCQUc5RixXQUFvQixXQUNuQixzREFDQWpHLEtBQUs4QixhQUFhbEMsaUJBQWlCLFVBQVUsU0FBQ3NDLEdBQUQsT0FBUyxFQUFLa0Msa0JBQWtCbEMsRUFBSyxFQUFLeEQsYSxzRUFmcEVzSCxDQUE4QjdDLEcsMEtDRjlCK0MsRUFBQUEsV0FDcEIsV0FBWWpLLEksNEZBQVMsU0FDcEIrRCxLQUFLOUQsU0FBV0QsRUFBUUMsU0FDeEI4RCxLQUFLN0QsTUFBUUYsRUFBUUUsTUFDckI2RCxLQUFLbUcsS0FBTyxvQyxxREFHYixTQUFpQkMsR0FDZCxPQUFLQSxFQUFJQyxHQUdGRCxFQUFJRSxPQUZMQyxRQUFRQyxPQUFSLGtCQUEwQkosRUFBSUssVyw2QkFLdkMsV0FBa0IsV0FDakIsT0FBT0MsTUFBTSxHQUFELE9BQUkxRyxLQUFLbUcsS0FBVCxZQUFpQm5HLEtBQUs5RCxTQUF0QixVQUF3QyxDQUNsRHlLLFFBQVMsQ0FDVEMsY0FBZTVHLEtBQUs3RCxTQUVuQm9ELE1BQUssU0FBQTZHLEdBQUcsT0FBSSxFQUFLUyxpQkFBaUJULFEscUJBR3RDLFNBQVFsSCxHQUFNLFdBQ2IsT0FBT3dILE1BQU0sR0FBRCxPQUFJMUcsS0FBS21HLEtBQVQsWUFBaUJuRyxLQUFLOUQsU0FBdEIsVUFBd0MsQ0FDbkQ0SyxPQUFRLE9BQ1JILFFBQVMsQ0FDUkMsY0FBZTVHLEtBQUs3RCxNQUNwQixlQUFnQixvQkFFakI0SyxLQUFNQyxLQUFLQyxVQUFVLENBQUNqSSxLQUFNRSxFQUFLRixLQUFNQyxLQUFNQyxFQUFLRCxTQUNoRE0sTUFBSyxTQUFBNkcsR0FBRyxPQUFJLEVBQUtTLGlCQUFpQlQsUSx3QkFHdEMsU0FBV2MsR0FBUSxXQUNsQixPQUFPUixNQUFNLEdBQUQsT0FBSTFHLEtBQUttRyxLQUFULFlBQWlCbkcsS0FBSzlELFNBQXRCLGtCQUF3Q2dMLEdBQVUsQ0FDN0RKLE9BQVEsU0FDUkgsUUFBUyxDQUNSQyxjQUFlNUcsS0FBSzdELE1BQ3BCLGVBQWdCLHNCQUVmb0QsTUFBSyxTQUFBNkcsR0FBRyxPQUFJLEVBQUtTLGlCQUFpQlQsUSxzQkFHdEMsU0FBU2MsR0FBUSxXQUNoQixPQUFPUixNQUFNLEdBQUQsT0FBSTFHLEtBQUttRyxLQUFULFlBQWlCbkcsS0FBSzlELFNBQXRCLGtCQUF3Q2dMLEVBQXhDLFVBQXdELENBQ25FSixPQUFRLE1BQ1JILFFBQVMsQ0FDUkMsY0FBZTVHLEtBQUs3RCxNQUNwQixlQUFnQixzQkFFZm9ELE1BQUssU0FBQTZHLEdBQUcsT0FBSSxFQUFLUyxpQkFBaUJULFEseUJBR3RDLFNBQVljLEdBQVEsV0FDbkIsT0FBT1IsTUFBTSxHQUFELE9BQUkxRyxLQUFLbUcsS0FBVCxZQUFpQm5HLEtBQUs5RCxTQUF0QixrQkFBd0NnTCxFQUF4QyxVQUF3RCxDQUNuRUosT0FBUSxTQUNSSCxRQUFTLENBQ1JDLGNBQWU1RyxLQUFLN0QsTUFDcEIsZUFBZ0Isc0JBRWZvRCxNQUFLLFNBQUE2RyxHQUFHLE9BQUksRUFBS1MsaUJBQWlCVCxRLHlCQUd0QyxXQUFjLFdBQ2IsT0FBT00sTUFBTSwrQkFBRCxPQUFnQzFHLEtBQUs5RCxTQUFyQyxhQUEwRCxDQUNwRXlLLFFBQVMsQ0FDVEMsY0FBZTVHLEtBQUs3RCxTQUVuQm9ELE1BQUssU0FBQTZHLEdBQUcsT0FBSSxFQUFLUyxpQkFBaUJULFEsMEJBR3RDLFlBQTRCLFdBQWRwSCxFQUFjLEVBQWRBLEtBQU0rRyxFQUFRLEVBQVJBLE1BQ25CLE9BQU9XLE1BQU0sR0FBRCxPQUFJMUcsS0FBS21HLEtBQVQsWUFBaUJuRyxLQUFLOUQsU0FBdEIsYUFBMkMsQ0FDdEQ0SyxPQUFRLFFBQ1JILFFBQVMsQ0FDUkMsY0FBZTVHLEtBQUs3RCxNQUNwQixlQUFnQixvQkFFakI0SyxLQUFNQyxLQUFLQyxVQUFVLENBQ3BCakksS0FBQUEsRUFDQStHLE1BQUFBLE1BRUN4RyxNQUFLLFNBQUE2RyxHQUFHLE9BQUksRUFBS1MsaUJBQWlCVCxRLDRCQUd0QyxZQUF5QixXQUFUTixFQUFTLEVBQVRBLE9BQ2YsT0FBT1ksTUFBTSxHQUFELE9BQUkxRyxLQUFLbUcsS0FBVCxZQUFpQm5HLEtBQUs5RCxTQUF0QixvQkFBa0QsQ0FDN0Q0SyxPQUFRLFFBQ1JILFFBQVMsQ0FDUkMsY0FBZTVHLEtBQUs3RCxNQUNwQixlQUFnQixvQkFFakI0SyxLQUFNQyxLQUFLQyxVQUFVLENBQUNuQixPQUFBQSxNQUNwQnZHLE1BQUssU0FBQTZHLEdBQUcsT0FBSSxFQUFLUyxpQkFBaUJULFcsc0VBN0ZsQkYsRywwR0MwQnJCLElBQU1pQixFQUFNLElBQUlqQixFQUFJakssR0FFZG1MLEVBQW9CLElBQUk5RyxFQUFjbEUsRVh6QlosbUJXMEJoQ2dMLEVBQWtCQyxtQkFFbEIsSUFBTUMsRUFBb0IsSUFBSWhILEVBQWNsRSxFWDNCWixtQlc0QmhDa0wsRUFBa0JELG1CQUVsQixJQUFNRSxFQUFzQixJQUFJakgsRUFBY2xFLEVYN0JaLHFCVzhCbENtTCxFQUFvQkYsbUJBRXBCLElBQU1HLEVBQWlCLElBQUk1RCxFWG5DTyxxQldvQ2xDNEQsRUFBZUMsb0JBRWYsSUFBTUMsRUFBb0IsSUFBSTFELEVYeENHLG9CVytIakMsU0FBd0I5QixFQUF4QixHQUFxRSxJQUE3QmxELEVBQTZCLEVBQXZDNEcsU0FBOEJHLEVBQVMsRUFBdkJGLGFBQzdDM0QsRUFBSUMsaUJBQ0p1RixFQUFrQkMsZUFBYyxHQUNoQ1IsRUFBSVMsYUFBYSxDQUFFNUksS0FBQUEsRUFBTStHLE1BQUFBLElBQ3ZCeEcsS0FBS29HLEdBQVNrQyxZQUFZLENBQUU3SSxLQUFBQSxFQUFNK0csTUFBQUEsS0FDbEN4RyxLQUFLbUksRUFBa0JwRSxTQUN2QndFLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFJRixNQUN6QkcsU0FBUSxrQkFBTVIsRUFBa0JDLGVBQWMsU0E3RmpERCxFQUFrQkQsb0JBRWxCLElBQU1VLEVBQWtCLElBQUluRSxFWHJDTyxzQlcrR25DLFNBQTBCOUIsRUFBMUIsR0FBcUQsSUFBVDRELEVBQVMsRUFBckJzQyxXQUMvQmxHLEVBQUlDLGlCQUNKZ0csRUFBZ0JSLGVBQWMsR0FDOUJSLEVBQUlrQixlQUFlLENBQUV2QyxPQUFBQSxJQUNuQnZHLE1BQUssU0FBQStJLEdBQUksT0FBSTNDLEdBQVM0QyxjQUFjRCxFQUFLeEMsV0FDekN2RyxLQUFLNEksRUFBZ0I3RSxTQUNyQndFLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFJRixNQUN6QkcsU0FBUSxrQkFBTUMsRUFBZ0JSLGVBQWMsU0FoRi9DUSxFQUFnQlYsb0JBRWhCLElBQU1lLEdBQW1CLElBQUl4QyxFWHZDTyx1QldnRnBDLFNBQTJCOUQsRUFBS2dGLEdBQy9CaEYsRUFBSUMsaUJBQ0pxRyxHQUFpQmIsZUFBYyxHQUMvQlIsRUFBSXNCLFdBQVd2QixHQUNiM0gsS0FBS2lKLEdBQWlCL0osVUFDdEJjLEtBQUtpSixHQUFpQmxGLFNBQ3RCd0UsT0FBTSxTQUFBQyxHQUFHLE9BQUlDLFFBQVFDLElBQUlGLE1BQ3pCRyxTQUFRLGtCQUFNTSxHQUFpQmIsZUFBYyxTQS9DaERhLEdBQWlCZixvQkFFakIsSUFBTWlCLEdBQW9CLElBQUkxRSxFWGhERyxvQld3SWpDLFNBQXdCOUIsRUFBeEIsR0FBK0QsSUFBdkJsRCxFQUF1QixFQUFqQzJKLFNBQTBCMUosRUFBTyxFQUFqQjJKLFNBQzdDMUcsRUFBSUMsaUJBQ0p1RyxHQUFrQmYsZUFBYyxHQUNoQyxJQUFNekksRUFBTyxDQUFDRixLQUFBQSxFQUFNQyxLQUFBQSxHQUNwQmtJLEVBQUkwQixRQUFRM0osR0FDVkssTUFBSyxTQUFBTCxHQUFJLE9BQUk0SixHQUFnQkMsWUFBWUMsR0FBVzlKLE9BQ3BESyxLQUFLbUosR0FBa0JwRixTQUN2QndFLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxRQUFRQyxJQUFJRixNQUN6QkcsU0FBUSxrQkFBTVEsR0FBa0JmLGVBQWMsU0EvRmpEZSxHQUFrQmpCLG9CQUVsQixJQUFNOUIsR0FBVyxJQUFJZixFWDVDVSxZV3dHL0IsV0FDQzBDLEVBQWtCMkIsa0JBQ2xCUCxHQUFrQlEsVUFqQm5CLFdBQ0MzQixFQUFvQjBCLGtCQUNwQmQsRUFBZ0JlLFVBR2pCLFdBQ0MsSUFBTVosRUFBTzNDLEdBQVN3RCxjQUN0QnpCLEVBQWtCNUcsVUFBVWEsU0FBUSxTQUFBQyxHQUNuQ0EsRUFBTTZDLE1BQVE2RCxFQUFLMUwsRUFBWWdGLEVBQU01QyxVQUd0Q29JLEVBQWtCNkIsa0JBQ2xCdkIsRUFBa0J3QixVQXREbkIsU0FBU0YsR0FBV0ksR0FFbkIsT0FEYSxJQUFJbE0sRUFBS2tNLEVBQVVuTixFQUFRbUIsT1g3Q0wsaUJXNkNtQ0UsR0FBaUJDLEdBQXdCQyxHQUFlQyxJQUNsSDRMLGVBSmIxRCxHQUFTOEIsb0JBT1QsSUFBTXFCLEdBQWtCLElBQUlyRyxHQUFRLFNBQUFRLEdBQ25DLElBQU1xRyxFQUFjTixHQUFXL0YsR0FDL0I2RixHQUFnQlMsUUFBUUQsS1hwRE8sVVd3RC9CL0MsUUFBUWlELElBQUksQ0FBQ3JDLEVBQUlnQyxjQUFlaEMsRUFBSXNDLG9CQUNsQ2xLLE1BQUssWUFBMEIsSSxJQUFBLEcsRUFBQSxFLDRDQUFBLEksZ3hCQUF4QitJLEVBQXdCLEtBQWxCb0IsRUFBa0IsS0FDL0IvRCxHQUFTa0MsWUFBWVMsR0FDckIzQyxHQUFTNEMsY0FBY0QsRUFBS3hDLFFBQzVCN0osRUFBUW1CLE9BQVNrTCxFQUFLNUosSUFDdEJvSyxHQUFnQmEsWUFBWUQsTUFFNUI1QixPQUFNLFNBQUFDLEdBQUcsT0FBSUMsUUFBUUMsSUFBSUYsTUFJNUIsSUFBTXpLLEdBQWtCLFNBQUMsR0FBbUIsSUFBakIwQixFQUFpQixFQUFqQkEsS0FBTUMsRUFBVyxFQUFYQSxLQUNoQ3VJLEVBQWUwQixLQUFLLENBQUVsSyxLQUFBQSxFQUFNQyxLQUFBQSxLQUc3QixTQUFTMUIsR0FBdUJvRCxFQUFJbEMsR0FDbkMrSixHQUFpQjlKLElBQU1pQyxFQUN2QjZILEdBQWlCL0osT0FBU0EsRUFDMUIrSixHQUFpQlUsT0FnRWxCLFNBQVMxTCxHQUFjMEosR0FDdEIsT0FBT0MsRUFBSXlDLFNBQVMxQyxHQUdyQixTQUFTekosR0FBaUJ5SixHQUN6QixPQUFPQyxFQUFJMEMsWUFBWTNDLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvdG9DYW1lbENhc2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy/QoWFyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdXNlclBvcHVwU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfdXNlcic7XHJcbmV4cG9ydCBjb25zdCBjYXJkUG9wdXBTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9jYXJkJztcclxuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXBTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9pbWFnZSc7XHJcbmV4cG9ydCBjb25zdCB1c2VyRm9ybVNlbGVjdG9yID0gJy5mb3JtX3R5cGVfdXNlcic7IFxyXG5leHBvcnQgY29uc3QgY2FyZEZvcm1TZWxlY3RvciA9ICcuZm9ybV90eXBlX2NhcmQnOyBcclxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm1TZWxlY3RvciA9ICcuZm9ybV90eXBlX2F2YXRhcic7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJQb3B1cFNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2F2YXRhcic7XHJcbmV4cG9ydCBjb25zdCBjb25maXJtUG9wdXBTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9jb25maXJtJztcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVTZWxlY3RvciA9ICcucHJvZmlsZSc7XHJcbmV4cG9ydCBjb25zdCBjYXJkc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0U2VsZWN0b3IgPSAnLmNhcmRzJztcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gJyNjYXJkLXRlbXBsYXRlJztcclxuZXhwb3J0IGNvbnN0IG15Q2FyZFRlbXBsYXRlU2VsZWN0b3IgPSAnI215LWNhcmQtdGVtcGxhdGUnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmREZWxldGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ0bicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IG9wdGlvbnMgPSB7XHJcblx0Y29ob3J0SWQ6ICdjb2hvcnQtNDYnLFxyXG5cdHRva2VuOiAnYTdjNTEwZTAtMDVhZC00NTllLWEwZDEtMzFhOTJkNGVmOTUxJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faXRlbScsXHJcblx0c3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fYnV0dG9uJyxcclxuXHRlcnJvckVsZW1lbnRTZWxlY3RvcjogJy5mb3JtX19pdGVtLWVycm9yJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pdGVtX3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pdGVtLWVycm9yX2FjdGl2ZSdcclxufTsiLCJleHBvcnQgZnVuY3Rpb24gdG9DYW1lbENhc2Uoc3RyaW5nKSB7XHJcblx0Y29uc3QgYXJyID0gc3RyaW5nLnNwbGl0KCctJyk7XHJcblx0cmV0dXJuIGFyclswXSArIGAke2FyclsxXVswXS50b1VwcGVyQ2FzZSgpfSR7YXJyWzFdLnNsaWNlKDEpfWBcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0ZGF0YSxcclxuXHRcdHVzZXJJZCxcclxuXHRcdHRlbXBsYXRlU2VsZWN0b3IsXHJcblx0XHRoYW5kbGVDYXJkQ2xpY2ssXHJcblx0XHRoYW5kbGVDb25maXJtUG9wdXBPcGVuLFxyXG5cdFx0aGFuZGxlUHV0TGlrZSxcclxuXHRcdGhhbmRsZURlbGV0ZUxpa2UsXHJcblx0XHRsaWtlc0NvdW50XHJcblx0KVxyXG5cdHtcclxuXHRcdHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcblx0XHR0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG5cdFx0dGhpcy5faWQgPSBkYXRhLl9pZDtcclxuXHRcdHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuXHRcdHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuXHRcdHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuXHRcdHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG5cdFx0dGhpcy5faGFuZGxlUHV0TGlrZSA9IGhhbmRsZVB1dExpa2U7XHJcblx0XHR0aGlzLl9oYW5kbGVEZWxldGVMaWtlID0gaGFuZGxlRGVsZXRlTGlrZTtcclxuXHRcdHRoaXMuX2xpa2VzQ291bnQgPSBsaWtlc0NvdW50O1xyXG5cdFx0dGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG5cdFx0dGhpcy5faGFuZGxlQ29uZmlybVBvcHVwT3BlbiA9IGhhbmRsZUNvbmZpcm1Qb3B1cE9wZW47XHJcblx0XHR0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcclxuXHRcdHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG5cdFx0dGhpcy5fY2FyZERlc2NyaXB0aW9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2Rlc2NyaXB0aW9uJyk7XHJcblx0XHR0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saWtlLWdyb3VwX19pY29uJyk7XHJcblx0XHR0aGlzLl9jYXJkTGlrZUNvdW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmxpa2UtZ3JvdXBfX2NvdW50JylcclxuXHRcdHRoaXMuX2NhcmREZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ0bicpO1xyXG5cdH1cclxuXHJcblx0Z2VuZXJhdGVDYXJkID0gKCkgPT4ge1xyXG5cdFx0dGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcblx0XHR0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHRcdHRoaXMuX2NhcmREZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblx0XHR0aGlzLl9jYXJkTGlrZUNvdW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cdFx0aWYgKHRoaXMuX293bmVySWQgPT09IHRoaXMuX3VzZXJJZCkge1xyXG5cdFx0XHR0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2RlbGV0ZS1idG5fZGlzYWJsZWQnKVxyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAobGV0IHVzZXIgb2YgdGhpcy5fbGlrZXMpIHtcclxuXHRcdFx0aWYgKHVzZXIuX2lkID09PSB0aGlzLl91c2VySWQpIHtcclxuXHRcdFx0XHR0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdsaWtlLWdyb3VwX19pY29uX2FjdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRfaGFuZGxlSW1hZ2VDbGljayA9ICgpID0+IHtcclxuXHRcdHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcblx0fVxyXG5cdFxyXG5cdF9yZW5kZXJMaWtlID0gKGNhcmQpID0+IHtcclxuXHRcdHRoaXMuX2NhcmRMaWtlQ291bnQudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aFxyXG5cdFx0dGhpcy5fY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnbGlrZS1ncm91cF9faWNvbl9hY3RpdmUnKVxyXG5cdH1cclxuXHJcblx0X2hhbmRsZUxpa2VDYXJkID0gKCkgPT4ge1xyXG5cdFx0aWYgKCF0aGlzLl9pc0xpa2VkKCkpIHtcclxuXHRcdFx0dGhpcy5faGFuZGxlUHV0TGlrZSh0aGlzLl9pZClcclxuXHRcdFx0XHQudGhlbihjYXJkID0+IHRoaXMuX3JlbmRlckxpa2UoY2FyZCkpXHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5faGFuZGxlRGVsZXRlTGlrZSh0aGlzLl9pZClcclxuXHRcdFx0XHQudGhlbihjYXJkID0+IHRoaXMuX3JlbmRlckxpa2UoY2FyZCkpXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfaXNMaWtlZCA9ICgpID0+IHtcclxuXHRcdHJldHVybiB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2xpa2UtZ3JvdXBfX2ljb25fYWN0aXZlJykgPyB0cnVlIDogZmFsc2U7XHJcblx0fVxyXG5cclxuXHRfaGFuZGxlRGVsZXRlQnRuQ2xpY2sgPSAoKSA9PiB7XHJcblx0XHR0aGlzLl9oYW5kbGVDb25maXJtUG9wdXBPcGVuKHRoaXMuX2lkLCB0aGlzLnJlbW92ZSk7XHJcblx0fVxyXG5cdFxyXG5cdHJlbW92ZSA9ICgpID0+IHtcclxuXHRcdHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG5cdH1cclxuXHJcblx0X3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW1hZ2VDbGljayk7XHJcblx0XHR0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUxpa2VDYXJkKTtcclxuXHRcdHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEZWxldGVCdG5DbGljayk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50U2VsZWN0b3IgPSBjb25maWcuZXJyb3JFbGVtZW50U2VsZWN0b3JcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShpbnB1dExpc3QpLnNvbWUoaW5wdXRFbGVtZW50ID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KVxyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHRoaXMuX2hpZGVJbnB1dEVycm9yKHRoaXMuX2Zvcm1FbGVtZW50LCBpbnB1dCkpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KHRoaXMuX2Zvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG5cdGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3Rvcikge1xyXG5cdFx0dGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHRcdHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG5cdH1cclxuXHJcblx0cHJlcGVuZEl0ZW0gPSAoZWxlbWVudCkgPT4ge1xyXG5cdFx0dGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudClcclxuXHR9XHJcblxyXG5cdGFkZEl0ZW0gPSAoZWxlbWVudCkgPT4ge1xyXG5cdFx0dGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuXHR9XHJcblxyXG5cdHJlbmRlckl0ZW1zID0gKGl0ZW1zKSA9PiB7XHJcblx0XHRpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG5cdH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuXHRjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcblx0XHR0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuXHRcdHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcblx0fVxyXG5cclxuXHRvcGVuKCkge1xyXG5cdFx0dGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuXHR9XHJcblx0XHJcblx0Y2xvc2UoKSB7XHJcblx0XHR0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG5cdH1cclxuXHJcblx0X2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG5cdFx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0dGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuXHRcdFx0aWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idG4nKSkge1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHR9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG5cdGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuXHRcdHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcblx0XHR0aGlzLl9wb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1kZXNjcmlwdGlvbicpO1xyXG5cdH1cclxuXHJcblx0b3BlbihpbWFnZSkge1xyXG5cdFx0c3VwZXIub3BlbigpO1xyXG5cdFx0dGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpbWFnZS5saW5rO1xyXG5cdFx0dGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBpbWFnZS5uYW1lO1xyXG5cdFx0dGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gaW1hZ2UubmFtZTtcclxuXHR9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcbmltcG9ydCB7IHRvQ2FtZWxDYXNlIH0gZnJvbSAnLi4vdXRpbHMvdG9DYW1lbENhc2UuanMnO1xyXG4gXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG5cdFx0c3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblx0XHR0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG5cdFx0dGhpcy5pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faXRlbScpO1xyXG5cdFx0dGhpcy5fZm9ybUJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19idXR0b24nKTtcclxuXHRcdHRoaXMuX2J1dHRvblRleHQgPSB0aGlzLl9mb3JtQnV0dG9uLnRleHRDb250ZW50O1xyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRfcmVuZGVyQnRuVGV4dCh0ZXh0KSB7XHJcblx0XHRyZXR1cm4gdGV4dC5zbGljZSgwLCA1KSArICh0ZXh0Lmxlbmd0aCA+IDcgPyAn0L3Rj9GOLi4uJyA6ICfRji4uLicpXHJcblx0fVxyXG5cclxuXHRyZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG5cdFx0aWYgKGlzTG9hZGluZykge1xyXG5cdFx0XHR0aGlzLl9mb3JtQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fcmVuZGVyQnRuVGV4dCh0aGlzLl9idXR0b25UZXh0KVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX2Zvcm1CdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25UZXh0O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcblx0XHRjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG5cclxuXHRcdHRoaXMuaW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG5cdFx0XHRpbnB1dFZhbHVlc1t0b0NhbWVsQ2FzZShpbnB1dC5uYW1lKV0gPSBpbnB1dC52YWx1ZTtcclxuXHRcdH0pXHJcblxyXG5cdFx0cmV0dXJuIGlucHV0VmFsdWVzO1xyXG5cdH1cclxuXHJcblx0Y2xvc2UoKSB7XHJcblx0XHRzdXBlci5jbG9zZSgpO1xyXG5cdFx0dGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuXHR9XHJcblxyXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0c3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZXZ0LCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpKSk7XHJcblx0fVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG5cdGNvbnN0cnVjdG9yKHByb2ZpbGVTZWxlY3Rvciwgb3BlbkNhcmRQb3B1cCwgb3BlbkF2YXRhclBvcHVwLCBvcGVuVXNlclBvcHVwKSB7XHJcblx0XHR0aGlzLl9vcGVuVXNlclBvcHVwID0gb3BlblVzZXJQb3B1cDtcclxuXHRcdHRoaXMuX29wZW5BdmF0YXJQb3B1cCA9IG9wZW5BdmF0YXJQb3B1cDtcclxuXHRcdHRoaXMuX29wZW5DYXJkUG9wdXAgPSBvcGVuQ2FyZFBvcHVwO1xyXG5cdFx0dGhpcy5fcHJvZmlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVTZWxlY3RvcilcclxuXHRcdHRoaXMuX25hbWVFbGVtZW50ID0gdGhpcy5fcHJvZmlsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcclxuXHRcdHRoaXMuX2FjdGl2aXR5RWxlbWVudCA9IHRoaXMuX3Byb2ZpbGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hY3Rpdml0eScpO1xyXG5cdFx0dGhpcy5fYXZhdGFyRWxlbWVudCA9IHRoaXMuX3Byb2ZpbGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuXHRcdHRoaXMuX2FkZENhcmRCdG4gPSB0aGlzLl9wcm9maWxlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ0bicpO1xyXG5cdFx0dGhpcy5fZWRpdFVzZXJBdmF0YXJCdG4gPSB0aGlzLl9wcm9maWxlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fb3ZlcmxheScpO1xyXG5cdFx0dGhpcy5fZWRpdFVzZXJJbmZvQnRuID0gdGhpcy5fcHJvZmlsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnRuJyk7XHJcblx0fVxyXG5cclxuXHRnZXRVc2VySW5mbygpIHtcclxuXHRcdGNvbnN0IHVzZXJJbmZvID0ge307XHJcblx0XHR1c2VySW5mby51c2VyTmFtZSA9IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50O1xyXG5cdFx0dXNlckluZm8udXNlckFjdGl2aXR5ID0gdGhpcy5fYWN0aXZpdHlFbGVtZW50LnRleHRDb250ZW50O1xyXG5cdFx0dXNlckluZm8uYXZhdGFyID0gdGhpcy5fYXZhdGFyRWxlbWVudC5zcmM7XHJcblx0XHRyZXR1cm4gdXNlckluZm87XHJcblx0fVxyXG5cclxuXHRzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuXHRcdHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuXHRcdHRoaXMuX2FjdGl2aXR5RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG5cdH1cclxuXHJcblx0c2V0VXNlckF2YXRhcihhdmF0YXIpIHtcclxuXHRcdHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xyXG5cdH1cclxuXHJcblx0c2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLl9hZGRDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb3BlbkNhcmRQb3B1cCk7XHJcblx0XHR0aGlzLl9lZGl0VXNlckF2YXRhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX29wZW5BdmF0YXJQb3B1cCk7XHJcblx0XHR0aGlzLl9lZGl0VXNlckluZm9CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vcGVuVXNlclBvcHVwKTtcclxuXHR9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuXHRjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcblx0XHRzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHRcdHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcblx0XHR0aGlzLl9mb3JtQnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2J1dHRvbicpO1xyXG5cdFx0dGhpcy5fdGV4dCA9IHRoaXMuX2Zvcm1CdXR0b24udGV4dENvbnRlbnQ7IFxyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG5cdFx0aXNMb2FkaW5nID8gdGhpcy5fZm9ybUJ1dHRvbi50ZXh0Q29udGVudCA9ICfQo9C00LDQu9GP0Y4uLi4nIDogdGhpcy5fZm9ybUJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XHJcblx0fVxyXG5cclxuXHRzZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKClcclxuXHRcdHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZXZ0LCB0aGlzLl9pZCkpXHJcblx0fVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcblx0XHR0aGlzLmNvaG9ydElkID0gb3B0aW9ucy5jb2hvcnRJZDtcclxuXHRcdHRoaXMudG9rZW4gPSBvcHRpb25zLnRva2VuO1xyXG5cdFx0dGhpcy5fdXJsID0gJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MSc7XHJcblx0fVxyXG5cclxuXHRfZ2V0UmVzcG9uc2VEYXRhKHJlcykge1xyXG4gICAgaWYgKCFyZXMub2spIHtcclxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXMuanNvbigpO1xyXG5cdH1cclxuXHJcblx0Z2V0SW5pdGlhbENhcmRzKCkge1xyXG5cdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLmNvaG9ydElkfS9jYXJkc2AsIHtcclxuXHRcdCAgaGVhZGVyczoge1xyXG5cdFx0XHRcdGF1dGhvcml6YXRpb246IHRoaXMudG9rZW5cclxuXHRcdFx0fVxyXG5cdFx0fSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpXHJcblx0fVxyXG5cclxuXHRhZGRDYXJkKGNhcmQpIHtcclxuXHRcdHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9LyR7dGhpcy5jb2hvcnRJZH0vY2FyZHNgLCB7XHJcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0YXV0aG9yaXphdGlvbjogdGhpcy50b2tlbixcclxuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcblx0XHRcdH0sXHJcblx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHtuYW1lOiBjYXJkLm5hbWUsIGxpbms6IGNhcmQubGlua30pXHJcblx0XHR9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSlcclxuXHR9XHJcblxyXG5cdGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcblx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuY29ob3J0SWR9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuXHRcdFx0bWV0aG9kOiAnREVMRVRFJyxcclxuXHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdGF1dGhvcml6YXRpb246IHRoaXMudG9rZW4sXHJcblx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG5cdFx0XHR9XHJcblx0XHR9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSlcclxuXHR9XHJcblxyXG5cdGxpa2VDYXJkKGNhcmRJZCkge1xyXG5cdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vJHt0aGlzLmNvaG9ydElkfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcblx0XHRcdG1ldGhvZDogJ1BVVCcsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHRhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxyXG5cdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuXHRcdFx0fVxyXG5cdFx0fSkudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpXHJcblx0fVxyXG5cclxuXHRkaXNsaWtlQ2FyZChjYXJkSWQpIHtcclxuXHRcdHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9LyR7dGhpcy5jb2hvcnRJZH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG5cdFx0XHRtZXRob2Q6ICdERUxFVEUnLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0YXV0aG9yaXphdGlvbjogdGhpcy50b2tlbixcclxuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcblx0XHRcdH1cclxuXHRcdH0pLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG5cdH1cclxuXHJcblx0Z2V0VXNlckluZm8oKSB7XHJcblx0XHRyZXR1cm4gZmV0Y2goYGh0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS8ke3RoaXMuY29ob3J0SWR9L3VzZXJzL21lYCwge1xyXG5cdFx0ICBoZWFkZXJzOiB7XHJcblx0XHRcdFx0YXV0aG9yaXphdGlvbjogdGhpcy50b2tlblxyXG5cdFx0XHR9XHJcblx0XHR9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSlcclxuXHR9XHJcblxyXG5cdGVkaXRVc2VySW5mbyh7bmFtZSwgYWJvdXR9KSB7XHJcblx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS8ke3RoaXMuY29ob3J0SWR9L3VzZXJzL21lYCwge1xyXG5cdFx0XHRtZXRob2Q6ICdQQVRDSCcsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHRhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxyXG5cdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuXHRcdFx0fSxcclxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0XHRcdG5hbWUsXHJcblx0XHRcdFx0YWJvdXRcclxuXHRcdFx0fSlcclxuXHRcdH0pLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKVxyXG5cdH1cclxuXHJcblx0ZWRpdFVzZXJBdmF0YXIoe2F2YXRhcn0pIHtcclxuXHRcdHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9LyR7dGhpcy5jb2hvcnRJZH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG5cdFx0XHRtZXRob2Q6ICdQQVRDSCcsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHRhdXRob3JpemF0aW9uOiB0aGlzLnRva2VuLFxyXG5cdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuXHRcdFx0fSxcclxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe2F2YXRhcn0pXHJcblx0XHR9KS50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSlcclxuXHR9XHJcbn0iLCJpbXBvcnQge1xyXG5cdGNvbmZpZyxcclxuXHRvcHRpb25zLFxyXG5cdGNhcmRMaXN0U2VsZWN0b3IsXHJcblx0Y2FyZFRlbXBsYXRlU2VsZWN0b3IsXHJcblx0Y2FyZEZvcm1TZWxlY3RvcixcclxuXHRwcm9maWxlU2VsZWN0b3IsXHJcblx0dXNlckZvcm1TZWxlY3RvcixcclxuXHRhdmF0YXJGb3JtU2VsZWN0b3IsXHJcblx0YXZhdGFyUG9wdXBTZWxlY3RvcixcclxuXHRjb25maXJtUG9wdXBTZWxlY3RvcixcclxuXHRpbWFnZVBvcHVwU2VsZWN0b3IsXHJcblx0dXNlclBvcHVwU2VsZWN0b3IsXHJcblx0Y2FyZFBvcHVwU2VsZWN0b3IsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyB0b0NhbWVsQ2FzZSB9IGZyb20gXCIuLi91dGlscy90b0NhbWVsQ2FzZS5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy/QoWFyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkob3B0aW9ucyk7XHJcblxyXG5jb25zdCB1c2VyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgdXNlckZvcm1TZWxlY3Rvcik7XHJcbnVzZXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjYXJkRm9ybVNlbGVjdG9yKTtcclxuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYXZhdGFyRm9ybVNlbGVjdG9yKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVBvcHVwU2VsZWN0b3IpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgdXNlclBvcHVwV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh1c2VyUG9wdXBTZWxlY3Rvciwgc3VibWl0VXNlckZvcm0pO1xyXG51c2VyUG9wdXBXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBUeXBlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oYXZhdGFyUG9wdXBTZWxlY3Rvciwgc3VibWl0QXZhdGFyRm9ybSlcclxucG9wdXBUeXBlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cFR5cGVDb25maXJtID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihjb25maXJtUG9wdXBTZWxlY3Rvciwgc3VibWl0Q29uZmlybUZvcm0pO1xyXG5wb3B1cFR5cGVDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKClcclxuXHJcbmNvbnN0IGNhcmRQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oY2FyZFBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhcmRGb3JtKTtcclxuY2FyZFBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVTZWxlY3Rvciwgb3BlbkNhcmRQb3B1cCwgb3BlbkF2YXRhclBvcHVwLCBvcGVuVXNlclBvcHVwKTtcclxudXNlckluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZEl0ZW0pIHtcclxuXHRjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZEl0ZW0sIG9wdGlvbnMudXNlcklkLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDb25maXJtUG9wdXBPcGVuLCBoYW5kbGVQdXRMaWtlLCBoYW5kbGVEZWxldGVMaWtlKTtcclxuXHRyZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuY29uc3QgY2FyZExpc3RFbGVtZW50ID0gbmV3IFNlY3Rpb24oaXRlbSA9PiB7XHJcblx0Y29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG5cdGNhcmRMaXN0RWxlbWVudC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufSwgY2FyZExpc3RTZWxlY3Rvcik7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkcygpIHtcclxuXHRQcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXHJcblx0XHQudGhlbigoW3VzZXIsIGluaXRpYWxDYXJkc10pID0+IHtcclxuXHRcdFx0dXNlckluZm8uc2V0VXNlckluZm8odXNlcik7XHJcblx0XHRcdHVzZXJJbmZvLnNldFVzZXJBdmF0YXIodXNlci5hdmF0YXIpO1xyXG5cdFx0XHRvcHRpb25zLnVzZXJJZCA9IHVzZXIuX2lkO1xyXG5cdFx0XHRjYXJkTGlzdEVsZW1lbnQucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcbn1cclxucmVuZGVyQ2FyZHMoKVxyXG5cclxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKHsgbmFtZSwgbGluayB9KSA9PiB7XHJcblx0cG9wdXBXaXRoSW1hZ2Uub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1Qb3B1cE9wZW4oaWQsIHJlbW92ZSkge1xyXG5cdHBvcHVwVHlwZUNvbmZpcm0uX2lkID0gaWQ7XHJcblx0cG9wdXBUeXBlQ29uZmlybS5yZW1vdmUgPSByZW1vdmU7XHJcblx0cG9wdXBUeXBlQ29uZmlybS5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdENvbmZpcm1Gb3JtKGV2dCwgY2FyZElkKSB7XHJcblx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0cG9wdXBUeXBlQ29uZmlybS5yZW5kZXJMb2FkaW5nKHRydWUpXHJcblx0YXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG5cdFx0LnRoZW4ocG9wdXBUeXBlQ29uZmlybS5yZW1vdmUoKSlcclxuXHRcdC50aGVuKHBvcHVwVHlwZUNvbmZpcm0uY2xvc2UoKSlcclxuXHRcdC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuXHRcdC5maW5hbGx5KCgpID0+IHBvcHVwVHlwZUNvbmZpcm0ucmVuZGVyTG9hZGluZyhmYWxzZSkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5BdmF0YXJQb3B1cCgpIHtcclxuXHRhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpXHJcblx0cG9wdXBUeXBlQXZhdGFyLm9wZW4oKVxyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuVXNlclBvcHVwKCkge1xyXG5cdGNvbnN0IHVzZXIgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cdHVzZXJQb3B1cFdpdGhGb3JtLmlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuXHRcdGlucHV0LnZhbHVlID0gdXNlclt0b0NhbWVsQ2FzZShpbnB1dC5uYW1lKV07XHJcblx0fSk7XHJcblxyXG5cdHVzZXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG5cdHVzZXJQb3B1cFdpdGhGb3JtLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlbkNhcmRQb3B1cCgpIHtcclxuXHRjYXJkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuXHRjYXJkUG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEF2YXRhckZvcm0oZXZ0LCB7YXZhdGFyTGluazogYXZhdGFyfSkge1xyXG5cdGV2dC5wcmV2ZW50RGVmYXVsdCgpXHJcblx0cG9wdXBUeXBlQXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSlcclxuXHRhcGkuZWRpdFVzZXJBdmF0YXIoeyBhdmF0YXIgfSlcclxuXHRcdC50aGVuKHVzZXIgPT4gdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyLmF2YXRhcikpXHJcblx0XHQudGhlbihwb3B1cFR5cGVBdmF0YXIuY2xvc2UoKSlcclxuXHRcdC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuXHRcdC5maW5hbGx5KCgpID0+IHBvcHVwVHlwZUF2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlKSlcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0VXNlckZvcm0oZXZ0LCB7dXNlck5hbWU6IG5hbWUsIHVzZXJBY3Rpdml0eTogYWJvdXQgfSkge1xyXG5cdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdHVzZXJQb3B1cFdpdGhGb3JtLnJlbmRlckxvYWRpbmcodHJ1ZSlcclxuXHRhcGkuZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSlcclxuXHRcdC50aGVuKHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkpXHJcblx0XHQudGhlbih1c2VyUG9wdXBXaXRoRm9ybS5jbG9zZSgpKVxyXG5cdFx0LmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG5cdFx0LmZpbmFsbHkoKCkgPT4gdXNlclBvcHVwV2l0aEZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdENhcmRGb3JtKGV2dCwge2NhcmROYW1lOiBuYW1lLCBjYXJkTGluazogbGlua30pIHtcclxuXHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRjYXJkUG9wdXBXaXRoRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUpXHJcblx0Y29uc3QgY2FyZCA9IHtuYW1lLCBsaW5rfSBcclxuXHRhcGkuYWRkQ2FyZChjYXJkKVxyXG5cdFx0LnRoZW4oY2FyZCA9PiBjYXJkTGlzdEVsZW1lbnQucHJlcGVuZEl0ZW0oY3JlYXRlQ2FyZChjYXJkKSkpXHJcblx0XHQudGhlbihjYXJkUG9wdXBXaXRoRm9ybS5jbG9zZSgpKVxyXG5cdFx0LmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG5cdFx0LmZpbmFsbHkoKCkgPT4gY2FyZFBvcHVwV2l0aEZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVB1dExpa2UoY2FyZElkKSB7XHJcblx0cmV0dXJuIGFwaS5saWtlQ2FyZChjYXJkSWQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUxpa2UoY2FyZElkKSB7XHJcblx0cmV0dXJuIGFwaS5kaXNsaWtlQ2FyZChjYXJkSWQpXHJcbn0iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib3B0aW9ucyIsImNvaG9ydElkIiwidG9rZW4iLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlcnJvckVsZW1lbnRTZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidG9DYW1lbENhc2UiLCJzdHJpbmciLCJhcnIiLCJzcGxpdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJDYXJkIiwiZGF0YSIsInVzZXJJZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDb25maXJtUG9wdXBPcGVuIiwiaGFuZGxlUHV0TGlrZSIsImhhbmRsZURlbGV0ZUxpa2UiLCJsaWtlc0NvdW50IiwiX2NhcmRJbWFnZSIsInNyYyIsIl9saW5rIiwiYWx0IiwiX25hbWUiLCJfY2FyZERlc2NyaXB0aW9uIiwidGV4dENvbnRlbnQiLCJfY2FyZExpa2VDb3VudCIsIl9saWtlcyIsImxlbmd0aCIsIl9vd25lcklkIiwiX3VzZXJJZCIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiX2lkIiwiX2NhcmRMaWtlQnV0dG9uIiwiYWRkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwiX2hhbmRsZUNhcmRDbGljayIsIm5hbWUiLCJsaW5rIiwiY2FyZCIsImxpa2VzIiwidG9nZ2xlIiwiX2lzTGlrZWQiLCJfaGFuZGxlRGVsZXRlTGlrZSIsInRoZW4iLCJfcmVuZGVyTGlrZSIsIl9oYW5kbGVQdXRMaWtlIiwiY29udGFpbnMiLCJfaGFuZGxlQ29uZmlybVBvcHVwT3BlbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQ2FyZCIsIl9oYW5kbGVEZWxldGVCdG5DbGljayIsInRoaXMiLCJvd25lciIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2xpa2VzQ291bnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dCIsIl9oaWRlSW5wdXRFcnJvciIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfZXJyb3JFbGVtZW50U2VsZWN0b3IiLCJfZm9ybVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiZWxlbWVudCIsIl9jb250YWluZXIiLCJwcmVwZW5kIiwiYXBwZW5kIiwiaXRlbXMiLCJpdGVtIiwiX3JlbmRlcmVyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJpbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1CdXR0b24iLCJfYnV0dG9uVGV4dCIsIl9oYW5kbGVGb3JtU3VibWl0IiwidGV4dCIsImlzTG9hZGluZyIsIl9yZW5kZXJCdG5UZXh0IiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiVXNlckluZm8iLCJwcm9maWxlU2VsZWN0b3IiLCJvcGVuQ2FyZFBvcHVwIiwib3BlbkF2YXRhclBvcHVwIiwib3BlblVzZXJQb3B1cCIsIl9vcGVuVXNlclBvcHVwIiwiX29wZW5BdmF0YXJQb3B1cCIsIl9vcGVuQ2FyZFBvcHVwIiwiX3Byb2ZpbGVFbGVtZW50IiwiX25hbWVFbGVtZW50IiwiX2FjdGl2aXR5RWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiX2FkZENhcmRCdG4iLCJfZWRpdFVzZXJBdmF0YXJCdG4iLCJfZWRpdFVzZXJJbmZvQnRuIiwidXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJBY3Rpdml0eSIsImF2YXRhciIsImFib3V0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX3RleHQiLCJBcGkiLCJfdXJsIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJfZ2V0UmVzcG9uc2VEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJhcGkiLCJ1c2VyRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJwb3B1cFdpdGhJbWFnZSIsInNldEV2ZW50TGlzdGVuZXJzIiwidXNlclBvcHVwV2l0aEZvcm0iLCJyZW5kZXJMb2FkaW5nIiwiZWRpdFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwicG9wdXBUeXBlQXZhdGFyIiwiYXZhdGFyTGluayIsImVkaXRVc2VyQXZhdGFyIiwidXNlciIsInNldFVzZXJBdmF0YXIiLCJwb3B1cFR5cGVDb25maXJtIiwiZGVsZXRlQ2FyZCIsImNhcmRQb3B1cFdpdGhGb3JtIiwiY2FyZE5hbWUiLCJjYXJkTGluayIsImFkZENhcmQiLCJjYXJkTGlzdEVsZW1lbnQiLCJwcmVwZW5kSXRlbSIsImNyZWF0ZUNhcmQiLCJyZXNldFZhbGlkYXRpb24iLCJvcGVuIiwiZ2V0VXNlckluZm8iLCJjYXJkSXRlbSIsImdlbmVyYXRlQ2FyZCIsImNhcmRFbGVtZW50IiwiYWRkSXRlbSIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW1zIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=